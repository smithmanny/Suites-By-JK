{"data":{"markdownRemark":{"html":"<p>After hearing all the hype about GraphQL and why developers should start learning it, I finally decided to do some research. I'm not going to go into to much detail, but GraphQL is a query language for your API. If you want to read more about it visit the official link <a href=\"https://graphql.org/\" target=\"_target\" rel=\"nofollow\">here</a>. So after reading, I came across a headless-cms that uses GraphQL instead of Rest and thought this would be the best chance for me to really try it out. We're going to build a blog with GrapgQL!</p>\n<hr>\n<p>Requirements:</p>\n<ul>\n<li>create-react-app</li>\n<li>GraphCMS account (Free)</li>\n</ul>\n<p><img src=\"https://shakhorblog.files.wordpress.com/2018/03/f9f51-13oteigk7uaspn93n2iywew.png?w=1100\"></p>\n<p>Sign up it's free!</p>\n<h3>Step 1 --- Setup GraphCMS:</h3>\n<p><img src=\"https://shakhorblog.files.wordpress.com/2018/03/e88d9-1uqh0g-bk6mbvyp_yhb8ytw.png?w=1100\"></p>\n<p>GraphCMS Dashboard</p>\n<p>Before we start doing any coding, you need to sign up for a free <a href=\"https://graphcms.com/\" target=\"_target\" rel=\"nofollow\">GraphCMS</a> account. We will be using GraphCMS to handle our backend for us. After signing up we're going to make a new project. Click on that project and you'll be greeted with the dashboard page. Don't worry about everything right now, the first thing we need to do is set up a new model. Click \"Models\" on the side nav bar, then click \"Add Content Model\" at the top of the page. The only field we need to worry about is display name. Enter \"Post\" as the display name and the API ID should autofill itself; once your done click save.</p>\n<h4>Adding Fields:</h4>\n<p>You should now see a new button that says \"Add Field\" under your Post Model. We're going to add four fields to make a basic blog: Image, Title, Description, and Slug.</p>\n<p>Adding Image:</p>\n<ol>\n<li>Click \"Add Field\"</li>\n<li>Click \"Asset\" then \"Asset Grid\"</li>\n<li>Give it the name \"Image\"</li>\n<li>Click next then save</li>\n</ol>\n<p>Adding Title:</p>\n<ol>\n<li>Click \"Add Field\"</li>\n<li>Click \"Text\" then \"Single Line\"</li>\n<li>Give it the name \"Title\"</li>\n<li>Click next then save</li>\n</ol>\n<p>Adding Description:</p>\n<ol>\n<li>Click \"Add Field\"</li>\n<li>Click \"Text\" then \"Rich Text\"</li>\n<li>Give it the name \"Description\"</li>\n<li>Click next then save</li>\n</ol>\n<p>Adding Slug:</p>\n<ol>\n<li>Click \"Add Field\"</li>\n<li>Click \"Text\" then \"Slug\"</li>\n<li>Give it the name \"Slug\"</li>\n<li>Click next then save</li>\n</ol>\n<p><img src=\"https://shakhorblog.files.wordpress.com/2018/03/b5c67-127tuqehvduyjcsj8wuvxma.png?w=1100\"></p>\n<p>Make sure to click \"R\" on the main Post model and Asset</p>\n<h4>Giving API access:</h4>\n<p>Once we're finished with our model, we need to give our API access to read our fields. Still, inside your Models view go to Post and click on \"R\". Make sure \"R\" is clicked for every field and that \"connect\" is selected for Image. Make sure to do the same for Asset as well.</p>\n<h4>Creating Dummy Data:</h4>\n<p>The last step for us inside of our GraphQL is to create some dummy data to show on our front-end. Click on Content then Post on the left side nav bar. You should see a plus icon on the top left. Click it and fill in the data. For the Slug field, you can just put in the Title name with dashes instead of spaces (This is a test = This-is-a-test).</p>\n<h3>Step 2 --- Create New React Project:</h3>\n<ul>\n<li>If you do not have creact-react-app installed run this command**</li>\n</ul>\n<p><code class=\"language-text\">npm i -g create-react-app</code></p>\n<p>Now we can finally code our blog. I did not design this blog to be amazing, so the design is bad, but it gets the job done.</p>\n<ol>\n<li>Navigate to where you want to store this project and create a new react project. I'm using create-react-app and I like to keep my projects inside a folder called projects(makes sense). I'm going to call this project \"blog\". Open up your terminal and type</li>\n</ol>\n<p><code class=\"language-text\">create-react-app blog</code></p>\n<p>then press enter and let create-react-app create our project for us.</p>\n<p>2. Once it's finished you need to change directory into your project.</p>\n<p>(Press Enter after the command)</p>\n<p><code class=\"language-text\">cd blog</code></p>\n<p>3. Before we can run our App we need to install a few packages.</p>\n<p><code class=\"language-text\">npm i react-router-dom react-apollo graphql-tag apollo-client apollo-link-http apollo-cache-inmemory</code></p>\n<p>4. Now we can finally start our App!</p>\n<p><code class=\"language-text\">npm start</code></p>\n<h3>Step 3 --- Start Coding</h3>\n<p>Now it's time for the fun part, coding our React project! I'm trying to keep this project as simple as possible, so I'm just going to throw all of my files inside the root of my src folder. Usually, I'll create a new folder for components, and etc, but we're not doing that today because it's a very small App.</p>\n<p>So with our project running, let's start creating our components.</p>\n<h4>Index.js</h4>\n<p>Open up your Index.js file inside your src folder and change it to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;; \nimport ReactDOM from &#39;react-dom&#39;; \nimport { ApolloClient } from &#39;apollo-client&#39;; \nimport { HttpLink } from &#39;apollo-link-http&#39;; \nimport { InMemoryCache } from &#39;apollo-cache-inmemory&#39;; \nimport { ApolloProvider } from &#39;react-apollo&#39;;\nimport App from &#39;./App&#39;; \nimport registerServiceWorker from &#39;./registerServiceWorker&#39;; \n\nconst API = &#39;ENTER_YOUR_API_ROUTE_HERE&#39;; \nconst client = new ApolloClient({ \n  link: new HttpLink({ uri: API }), \n  cache: new InMemoryCache() \n }); \n\nReactDOM.render(\n  &lt;ApolloProvider client={client}&gt; \n    &lt;App /&gt; \n  &lt;/ApolloProvider&gt;, \n  document.getElementById(&#39;root&#39;)); \n\n  registerServiceWorker();</code></pre></div>\n<p><img src=\"https://shakhorblog.files.wordpress.com/2018/03/675a1-1f6fdkmy4q-cnov1wevrpkg.png?w=1100\"></p>\n<p>For the const variable API, we need to get your GraphCMS API key. Head over back to GraphCMS website and log in. Once logged in scroll down to settings. Inside your settings tab scroll down until you see Endpoints and copy your Simple Endpoint API.</p>\n<h4>Header Component</h4>\n<p>Inside your src folder create a new file called Header.js and paste this code:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;;\n\nconst Header = () =&gt; {\n  return &lt;header&gt;Headless CMS&lt;/header&gt;;\n}\n\nexport default Header;</code></pre></div>\n<h4>Landing Component</h4>\n<p>Make a new file in src folder called Landing.js and paste this code, I'll explain it later.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> import React from &#39;react&#39;; \n import { Link } from &#39;react-router-dom&#39;; \n import { graphql } from &#39;react-apollo&#39;; \n import gql from &#39;graphql-tag&#39;; \n  \n const Landing = ({ data: { loading, allPosts } }) =&gt; { \n  if (!loading) { \n    return ( \n      &lt;div className=&quot;wrapper&quot;&gt; \n        {allPosts.map(post =&gt; ( \n          &lt;article className=&quot;content&quot; key={post.id}&gt; \n            &lt;h2&gt;{post.title}&lt;/h2&gt; \n            &lt;p dangerouslySetInnerHTML={{ __html: post.description }} /&gt; \n            &lt;Link to={`/post/${post.slug}`}&gt; \n              &lt;button className=&quot;btn&quot;&gt;Read More&lt;/button&gt; \n            &lt;/Link&gt; \n          &lt;/article&gt; \n        ))} \n      &lt;/div&gt; \n    ); \n  } \n  \n  return &lt;h2&gt;Loading Posts...&lt;/h2&gt; \n }; \n  \n const allPosts = gql` \n  query allPosts { \n    allPosts { \n      id \n      title \n      description \n      slug \n    } \n  } \n `; \n\n export default graphql(allPosts)(Landing); </code></pre></div>\n<p>That was a lot of code so let me explain it a little. We created a new component called Landing and imported a few packages.</p>\n<ul>\n<li>react-router-dom (To use the Link to switch between our component views)</li>\n<li>react-apollo (Used to get our data from GraphCMS API)</li>\n<li>graphql-tag (Used to get our data from GraphCMS API)</li>\n</ul>\n<p>The const variable allPosts is where we are calling to our database to get all of our posts and its fields (id, title, description, and slug) in the form of an array, then we're passing that to our Landing.js data object. The if statement for loading is something that Apollo looks for. If the query is not finished \"loading\" is set to true and we return</p>\n<p>//Landing.js</p>\n<p><code class=\"language-text\">&lt;h2&gt;Loading Posts...&lt;/h2&gt;</code></p>\n<p>Once Apollo finishes with the query loading is set to false and then we render all of our blog posts.</p>\n<h4>Post Component</h4>\n<p>Our Post Component is going to be the same thing just a little different since we only want the post that we clicked on. How we handle this is from the Landing Component when we click on the \"read more\" button:</p>\n<p>//Landing.js</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Link to={`/post/${post.slug}`}&gt;\n  &lt;button className=&quot;btn&quot;&gt;Read More&lt;/button&gt;\n&lt;/link&gt;</code></pre></div>\n<p>If our slug was \"first-post\" the Link tag would navigate the user to localhost/post/first-post. This is important because later inside of out Post component we're going to get the slug from the URL.</p>\n<hr>\n<p>Create a new file called Post.js and paste this code in:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;; \nimport { graphql } from &#39;react-apollo&#39;; \nimport gql from &#39;graphql-tag&#39;; \n\nconst Post = ({ data: { loading, post } }) =&gt; { \n  if (!loading) { \n    return ( \n    &lt;article className=&quot;wrapper&quot;&gt; \n      &lt;div className=&quot;post&quot;&gt; \n        &lt;h1&gt;{post.title}&lt;/h1&gt; \n        &lt;img src={post.image.url} alt=&quot;Dogs&quot; /&gt; |\n        &lt;p dangerouslySetInnerHTML={{ __html: post.description }} /&gt; \n      &lt;/div&gt; \n    &lt;/article&gt; \n  ); \n} \n  return &lt;h2&gt;Loading article...&lt;/h2&gt; \n}; \n\nconst singlePost = gql` \n  query singlePost($slug: String!) { \n    post: Post(slug: $slug) { \n      id \n      slug \n      title \n      description \n      image { \n        url \n    } \n  } \n } \n `; \n  \n export default graphql(singlePost, { \n  options: ({ match }) =&gt; ({ \n    variables: { \n      slug: match.params.slug \n    } \n  }) \n })(Post); </code></pre></div>\n<p>Like I said before you can see that we are getting the slug params from the variables object. This code is basically saying we are only looking for a post that matches slug param from the URL.</p>\n<h4>App Component</h4>\n<p>Open up our App.js file and delete everything and paste this code. Don't worry if you don't know what this code is doing, it's just setting up our routes for us. You can learn more <a href=\"https://reacttraining.com/react-router/\" target=\"_target\" rel=\"nofollow\">here</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;; |\nimport { BrowserRouter, Switch, Route } from &#39;react-router-dom&#39;; |\nimport Header from &#39;./Header&#39;; |\nimport Landing from &#39;./Landing&#39;; |\nimport Post from &#39;./Post&#39;; |\nimport &#39;./App.css&#39;; |\n\nconst App = () =&gt; ( \n  &lt;BrowserRouter&gt;\n    &lt;main&gt; \n      &lt;Header /&gt; \n      &lt;Switch&gt; \n        &lt;Route exact path=&quot;/&quot; component={Landing} /&gt; \n        &lt;Route path=&quot;/post/:slug&quot; component={Post} /&gt; \n      &lt;/Switch&gt; \n    &lt;/main&gt; \n  &lt;/BrowserRouter&gt; \n); \n\nexport default App; </code></pre></div>\n<h3>Step 4 --- Styling our App (Sort of)</h3>\n<p>This is something hopefully everybody knows if you're reading this tutorial, if not stop and go learn the basics first...for real. Again to keep this tutorial simple I just posted everything inside my App.css file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">* {\n box-sizing: border-box;\n padding: 0;\n margin: 0;\n}\n\nbody {\n background-color: #F4F4F4;\n}\n\nheader {\n height: 100px;\n background-color: rgb(211, 206, 206);\n display: flex;\n align-items: center;\n justify-content: center;\n font-size: 2.5em;\n}\n\n.wrapper {\n max-width: 1500px;\n margin: 0 auto;\n}\n\n/* Landing Section */\n.content {\n background-color: white;\n margin: 50px auto;\n padding: 1rem;\n box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.5);\n}\n\narticle h2 {\n text-align: center;\n}\narticle p {\n margin-top: 20px;\n}\n\n.btn {\n background-color: transparent;\n border: 1px solid black;\n padding: .5rem 1rem;\n margin: 20px auto 0 auto;\n display: block;\n}\n\n/* Post Section */\n.post {\n padding: 1rem;\n}\n.post h1 {\n text-align: center;\n margin: 20px;\n}\n.post img {\n display: block;\n margin: 0 auto 30px auto;\n}</code></pre></div>\n<h3>Enjoy your React and GraphQL blog!</h3>\n<p>You can view the full code <a href=\"https://github.com/smithmanny/React-Blog\" target=\"_target\" rel=\"nofollow\">here</a>. (I probably will be updating this App later to make it look more appealing and structuring the code)</p>\n<p><img src=\"https://shakhorblog.files.wordpress.com/2018/03/f9501-13nt0aops5jkjtywuk_4yww.png?w=1100\"></p>\n<p><img src=\"https://shakhorblog.files.wordpress.com/2018/03/c8947-1vuacxx50zarecqjuw_shkg.png?w=1100\"></p>","frontmatter":{"title":"How To Make App A Blog With React & GraphQL","slug":"how-to-make-a-blog-with-react-and-graphql"}}},"pageContext":{"slug":"how-to-make-a-blog-with-react-and-graphql"}}